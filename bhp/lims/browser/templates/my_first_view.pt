<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="bhp.lims">
  <head>
    <metal:block fill-slot="javascript_head_slot"
                 tal:define="portal context/@@plone_portal_state/portal;">
    </metal:block>
    <metal:block fill-slot="style_slot"
                 tal:define="portal context/@@plone_portal_state/portal;">
    </metal:block>
  </head>
  <body>

    <!-- Title -->
    <metal:title fill-slot="content-title">
      <h1 i18n:translate="">
        Active clients
      </h1>
    </metal:title>

    <!-- Description -->
    <metal:description fill-slot="content-description">
    </metal:description>

    <!-- Content -->
    <metal:core fill-slot="content-core">
      <div tal:define="my_clients python:view.clients">

        <div tal:condition="python: my_clients">
          <h2>Some clients found</h2>
          <table cellpadding="0" cellspacing="0" width="100%">
            <tr>
              <th>Title</th>
              <th>Client ID</th>
            </tr>
            <tr tal:repeat="client my_clients">
              <td>
                <a tal:attributes="href python:client.absolute_url()"
                   tal:content="python: client.Title()"></a>
              </td>
              <td tal:content="python: client.getClientID()"></td>
            </tr>
          </table>

          <form class="form"
                id="my_form"
                name="my_form"
                method="POST">

            <!-- Hidden Fields -->
            <input type="hidden" name="submitted" value="1"/>
            <input tal:replace="structure context/@@authenticator/authenticator"/>

            <!-- Form Controls -->
            <div>
              <!-- Export list to csv -->
              <input class="btn btn-info btn-sm"
                     type="submit"
                     name="button_to_csv"
                     i18n:attributes="value"
                     value="Export to CSV"/>
            </div>
          </form>
        </div>

        <div tal:condition="python: len(my_clients) == 0">
          No clients found
        </div>
      </div>
    </metal:core>
  </body>
</html>
